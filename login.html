<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="src/css/style.css">
    <link rel="stylesheet" href="src/css/reset.css">
    <title>Login</title>
  </head>
  <body>
    <div class="login-container">
      <h2>Login</h2>
      
      <form id="loginForm" class="inputArea">
        <section class="inputArea"> 
          <p>Email</p>
          <input class="inputBox" type="email" id="email" name="email" required />
          
          <p>Senha</p>
          <input class="inputBox" type="password" id="senha" name="senha" required />
          
          <div class="error-message" id="errorMessage"></div>
          
          <button type="submit">Entrar</button>
          
          <div class="toggle-link">
            <a href="index.html">Não tem conta? Registre-se</a>
          </div>
        </section>
      </form>
    </div>

    <script>
      document.getElementById('loginForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const email = document.getElementById('email').value;
        const senha = document.getElementById('senha').value;
        const errorMessage = document.getElementById('errorMessage');
        
        errorMessage.textContent = '';
        
        try {
          const response = await fetch('/login', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email, senha })
          });
          
          const data = await response.json();
          
          if (data.sucesso) {
            alert('Login bem-sucedido!');
            // Redirecionar para outra página após login
            // window.location.href = '/dashboard';
          } else {
            errorMessage.textContent = 'Credenciais inválidas';
          }
        } catch (error) {
          errorMessage.textContent = 'Erro ao tentar fazer login';
        }
      });
    </script>
  </body>
</html>
